# Телеграмм Бот для поиска отелей

Разработчик: Мозговой Евгений

Название бота: HotelsBot

## Требования для работы

Для корректной работы бота необходим токен Телеграмм бота, а так же ключь ресурса https://rapidapi.com/ru/apidojo/api/hotels4/.

## Основные функции.

Для взаимодействием с ботом необходимо написать любое сообщение. После чего бот отправит приветственное сообщение.
В этом сообщении он предложит выбрать одну из двух команд: /help, /history или указать город в котором будет производиться поиск отелей.

### Описание команды /history:

При указании этой команды бот выведет краткую информацию о предыдущих запросах пользователя по поиску отелей.
После этого можно выбрать по какому из запросов необходимо представить более подробную информацию.

### После указания названия города:

С целью ускорения работы, бот сохраняет id всех городов, по которым производился поиск в файл city_id_cash.json. 
В случае если запрос по городу происходит впервые, бот делает запрос id города на https://hotels4.p.rapidapi.com/locations/v2/search.
После того, как бот убедится, что введеный город существует, он предложит выбрать одну из следующий команд для поиска:
/lowprice - вывод самых дешёвых отелей в городе, /highprice - вывод самых дорогих отелей в городе, 
/bestdeal - вывод отелей, наиболее подходящих по цене и расположению от центра.

### Описание команды /lowprice и /highprice:

После выбора одной из этих команд, бот запросит:
1) количество выводимых отелей,
2) дату заселения,
3) количество ночей пребывания в отеле.

Далее бот выдаст запрашиваемое количество отелей.
Если введена команда: /lowprice отели будут показаны в порядке возрастания цены от самого дешевого.
Если введена команда: /highprice отели будут показаны в порядке убывания цены от самого дорогого.

Бот делает запрос по адресу: https://hotels4.p.rapidapi.com/properties/list.

### Описание команды /bestdeal:

Бот запросит следующие данные:
1) Минимальную цену проживания за 1 ночь,
2) Максимальную цену проживания за 1 ночь,
3) Минимальное расстояние от центра,
4) Максимальное расстояние от центра,
5) количество выводимых отелей,
6) дату заселения,
7) количество ночей пребывания в отеле.

Далее бот выдаст запрашиваемое количество отелей.
Бот делает запрос по адресу: https://hotels4.p.rapidapi.com/properties/list. 
С выборкой отелей с ценой проживания за ночь между указанными минимальной и максимальной.
Далее происходит отбор по расстоянию от центра. Если нужное количество отелей не находится, то делается повторный запрос 
дополнительного количества отелей.

### Информация об отелях.

Независимо от указанной команды бот выдаст следующею информацию:
1) Название отеля.
2) Адрес отеля.
3) Расстояние до центра города.
4) Цена за номер за весь указанный период.

### Просмотр фото отелей.

Указав номер отеля, выводимого в запросе, бот покажет 5 фотографий отеля.
Указав 0 бот сохранит запрос в история поиска и будет ожидать ввода любого текста, для формирования нового запроса информации.


